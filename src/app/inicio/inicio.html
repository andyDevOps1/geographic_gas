<div class="inicio-page">
  <!-- Imagen de fondo de pantalla -->
  <img src="/fondo_body.jpg" class="bg_img" />

  <div class="big_card">
    <!-- Header -->
    <h1>Localizador de gasolineras cercanas</h1>

    <!-- Dirección y número de gasolineras -->
    <div class="row">
      <div class="localizador">
        <p>Dirección</p>

        <!-- ngModel para enlazar el input con la variable 'direccion' del componente  -->
        <input type="text" [(ngModel)]="direccion" placeholder="Ej: Gran Vía, Madrid"/>
      </div>

      <div class="num_gas">
        <p>Número de gasolineras</p>

        <!-- Input con mínimo 1 -->
        <input type="number" min="1" [(ngModel)]="numGas" />
      </div>
    </div>

    <!-- Radio y tipo de carburante -->
    <div class="row">
      <div class="localizador">
        <p>Radio (km)</p>

        <!-- Radio en km con máximo 100 y mínimo 1 -->
        <input type="number" min="1" max="100" [(ngModel)]="radioKm" />
      </div>

      <div class="localizador">
        <p>Carburante</p>

        <!-- Desplegable de carburantes -->
        <select [(ngModel)]="IdCarburante">
          <!-- *ngFor recorre la lista de carburantes y crea una opción para cada uno -->
          <option *ngFor="let f of carburantes" [value]="f.id">
            {{ f.label }}
          </option>
        </select>
      </div>
    </div>

    <!-- Filtro de empresas -->
    <div class="row">
      <div class="localizador">
        <p>Empresa</p>

        <!-- Desplegable de empresas -->
        <select [(ngModel)]="empresaSeleccionada">
          <option *ngFor="let e of empresasTop" [value]="e">
            {{ e }}
          </option>
        </select>
      </div>
    </div>
 
    <!-- Botón de búsqueda -->
    <div class="button_search">
      <!-- Al hacer click llama a la función -->
      <button (click)="obtenerDireccionYBuscar()">Buscar</button>
    </div>

    <!-- Mensajes de estado -->
    <p *ngIf="ubicacionTexto">{{ ubicacionTexto }}</p>
    <p *ngIf="loading">Buscando...</p>
    <p *ngIf="info && !error">{{ info }}</p>

    <!-- Mensaje de error -->
    <p class="error_p" *ngIf="error">{{ error }}</p>
  </div>

  <!-- Sección de resultados -->
  <div class="results_card">
    <h2>Gasolineras localizadas</h2>

    <!-- Si hay resultados, se muestra el precio -->
    <p *ngIf="results.length">
      Precio mostrado: {{ fuelLabel }}
    </p>

    <!-- *ngFor recorre la lista de gasolineras -->
    <div *ngFor="let g of results">
      <!-- Marcar gasolinera más barata -->
      <div *ngIf="g.barata" style="font-weight:700">¡Más barata!</div>

      <!-- Datos de la gasolinera -->
      <b>{{ g.empresa }}</b> · {{ g.distanciaKm | number:'1.1-1' }} km<br />

      <!-- Dirección -->
      {{ g.direccion }}<br />

      <!-- Localidad/provincia -->
      <small>{{ g.localidad }} · {{ g.provincia }}</small><br />

      <!-- Horario -->
      <small>Horario: {{ g.horario }}</small><br />

      <!-- Si el precio es nulo muestra N/D, sino muestra el precio -->
      <small>Precio: {{ g.precio ?? 'N/D' }} €/L</small>

      <!-- Separador visual entre resultados -->
      <hr /> 
    </div>
  </div>
</div>

