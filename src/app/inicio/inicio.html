<div class="inicio-page">
  <img src="/fondo_body.jpg" class="bg_img" />

  <div class="big_card">
    <h1>Localizador de gasolineras cercanas</h1>

    <div class="row">
      <div class="localizador">
        <p>Dirección</p>
        <input type="text" [(ngModel)]="direccion" />
      </div>

      <div class="num_gas">
        <p>Número de gasolineras</p>
        <input type="number" min="1" [(ngModel)]="numGas" />
      </div>
    </div>

    <div class="row">
      <div class="localizador">
        <p>Radio (km)</p>
        <input type="number" min="1" max="100" [(ngModel)]="radioKm" />
      </div>

      <div class="localizador">
        <p>Carburante</p>
        <select [(ngModel)]="fuelId">
          <option *ngFor="let f of fuelOptions" [value]="f.id">
            {{ f.label }}
          </option>
        </select>
      </div>
    </div>

    <div class="row">
      <div class="localizador">
        <p>Empresa</p>
        <select [(ngModel)]="empresaSeleccionada">
          <option *ngFor="let e of empresasTop" [value]="e">
            {{ e }}
          </option>
        </select>
      </div>
    </div>

    <div class="button_search">
      <button (click)="obtenerDireccionYBuscar()">Buscar</button>
    </div>

    <p *ngIf="ubicacionTexto">{{ ubicacionTexto }}</p>
    <p *ngIf="loading">Buscando...</p>
    <p *ngIf="info && !error">{{ info }}</p>
    <p class='error_p' *ngIf="error">{{ error }}</p>
  </div>

  <div class="results_card">
    <h2>Gasolineras localizadas</h2>

    <p *ngIf="results.length">
      Precio mostrado: {{ fuelLabel }}
    </p>

    <div *ngFor="let g of results">
      <div *ngIf="g.isCheapest" style="font-weight:700">¡Más barata!</div>
      <b>{{ g.empresa }}</b> · {{ g.distanciaKm | number:'1.1-1' }} km<br />
      {{ g.direccion }}<br />
      <small>{{ g.localidad }} · {{ g.provincia }}</small><br />
      <small>Horario: {{ g.horario }}</small><br />
      <small>Precio: {{ g.precio ?? 'N/D' }} €/L</small>
      <hr />
    </div>
  </div>
</div>